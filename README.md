# spring-bootcamp

https://start.spring.io/#!type=gradle-project&language=kotlin&platformVersion=2.5.5&packaging=jar&jvmVersion=11&groupId=cypher&artifactId=spring-bootcamp&name=spring-bootcamp&description=Demo%20project%20for%20Spring%20Boot&packageName=cypher.spring-bootcamp&dependencies=web ã‚’ã‚‚ã¨ã«é–‹å§‹

# èª²é¡Œ

### 1.  Hello World API

\1.   Hello Worldã‚’è¿”å´ã™ã‚‹APIã€‚Spring Bootã®åŸºç¤ã¨ãªã‚‹éƒ¨åˆ†ã§ã™ã€‚

### 2.  Book API

\1.   æ›¸ç±ç®¡ç†APIã€‚CRUDã®å‹‰å¼·ç”¨ã§ã™ã€‚1 ãŒçµ‚ã‚ã£ãŸã‚‰ã“ã¡ã‚‰ã«é€²ã‚“ã§ãã ã•ã„ã€‚

# Hello World API

| **No** | **èª²é¡Œ**                               | **ã‚„ã‚‹ã“ã¨**                                                 |
| ------ | -------------------------------------- | ------------------------------------------------------------ |
| 1      | Hello World                            | "Hello       World" ã‚’ Stringã§è¿”å´ã™ã‚‹APIã‚’ä½œæˆã—ã¦ãã ã•ã„   Spring       Initializrã‚’åˆ©ç”¨ã—ã¦ä½œæˆã—ã¦ãã ã•ã„ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã§Downloadã—ã¦ã‚‚IDEã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ã‚‚OKã§ã™   Projectåç§°ã¯ãŠå¥½ããªã‚‚ã®ã§ |
| 2      | Hello World API                        | requestã§ name ã‚’å—ã‘å–ã‚Šã€ä¾‹ã®é€šã‚Šã®Responseã‚’Jsonã§è¿”å´ã—ã¦ãã ã•ã„ã€‚        ä¾‹: {"message":"Hello,       $name"} |
| 3      | è¨­å®šã—ã¦ã„ãªã„ Pathã¸ã®Requestã¸ã®å¯¾å¿œ | è¨­å®šã—ã¦ã„ãªã„Pathã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸã¨ãã«HTTP Status 404ã§Responseã‚’Jsonã§è¿”å´ã—ã¦ãã ã•ã„ã€‚        ä¾‹: {"reason":"no handler       found"} |
| 4      | Exception å¯¾å¿œ                         | Applicationã§ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸéš›ã€HTTP Status 500ã§Jsonã‚’è¿”å´ã—ã¦ãã ã•ã„ã€‚        ä¾‹: {"reason":"something       wrong ;-("} |
| 5      | Validation                             | nameã«ã€Œ3æ–‡å­—ä»¥ä¸Š10æ–‡å­—ä»¥å†…ã€ã®Validationã‚’è¨­å®šã™ã‚‹   ValidationExceptionãŒç™ºç”Ÿã—ãŸéš›ã€HTTP Status 400ã§Responseã‚’Jsonã§è¿”å´ã—ã¦ãã ã•ã„ã€‚        ä¾‹: {"reason":"invalid parameter:       detail: [[hello.name](http://hello.name): 3 ã‹ã‚‰ 10 ã®é–“ã®ã‚µã‚¤ã‚ºã«ã—ã¦ãã ã•ã„]"} |
| 6      | Spring Profilesã”ã¨ã«å®šæ•°ã‚’å®šç¾©ã™ã‚‹    | APIã®Responseã‚’ {"message":"Hello       $text, $name"} ã«ä¿®æ­£ã—ã¦ãã ã•ã„   textã®å€¤ã¯application.ymlã«å®šç¾©ã—ã¦Applicationå†…ã§åˆ©ç”¨ã—ã¦ãã ã•ã„   spring       profilesãŒdevã®ã¨ãã¯textã®å€¤ã‚’å¤‰ãˆã¦ãã ã•ã„              spring        profiles devä»¥å¤–ã®å ´åˆã®å‡ºåŠ›: {"message":"Hello        my best friend, foo"}    spring        profiles ãŒdevã®å ´åˆã®å‡ºåŠ›: {"message":"Hello        my friend, foo"} |
| 7      | Debug Log                              | Applicationã«debug logã‚’ä»•è¾¼ã¿ã€request nameã‚’logå‡ºåŠ›ã—ã¦ãã ã•ã„   è‡ªèº«ã®é–‹ç™ºãƒ‘ãƒƒã‚²ãƒ¼ã‚¸ã«ã®ã¿è¨­å®šã™ã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ (ä»–ã®Library, ä¾‹ãˆã°springframeworkã®debug logã¯å‡ºåŠ›ã—ãªã„)   spring       profilesãŒdevã®ã¨ãã«ã ã‘debug       logã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ |
| 8      | Kotlin Code Style                      | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Kotlin formatã‚’Kotlin Code Styleã«ã—ã¦ãã ã•ã„ (gradle.propertiesã®è¨­å®š) |
| 9      | ãã®ä»–                                 | graceful       shutdownå¯¾å¿œã‚’ã—ã¦ãã ã•ã„   healthcheckå¯¾å¿œã‚’ã—ã¦ãã ã•ã„ |



# Book API

| **No**                                                | **èª²é¡Œ**                     | **ã‚„ã‚‹ã“ã¨**                                                 |
| ----------------------------------------------------- | ---------------------------- | ------------------------------------------------------------ |
| 1                                                     | Databaseã®æº–å‚™               | docker-composeã§postgresqlã‚’ç”¨æ„ã—ã¦ãã ã•ã„        docker-composeã‚’åˆ©ç”¨ã—ã¾ã™ (dockerãŒé›£ã—ã„å ´åˆã¯æ¨¡ç¯„è§£ç­”ã‚’æä¾›ã—ã¾ã™)   èµ·å‹•æ™‚ã«table createã¨åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆã—ã¦ãã ã•ã„    3.    table å®šç¾© (schemaåã¯ãªã‚“ã§ã‚‚ğŸ™†â€â™‚ï¸)  ![img](file:////Users/abi01384/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image001.png)ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å±•é–‹ã•ã‚Œã¾ã™...   `CREATE TABLE main.book``(``  isbn    varchar(13) NOT NULL,``  title   varchar(100) NOT NULL,``  author   varchar(100) NOT NULL,``  publisher varchar(100) NOT NULL,``  price   integer   NOT NULL,``  created_at timestamp  NOT NULL,``  updated_at timestamp  NOT NULL,``  PRIMARY KEY (isbn)``)` |
| 2                                                     | List å®Ÿè£…                    | Databaseã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’Jsonã§è¿”å´ã™ã‚‹listå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„   Database       Accessã«ã¯[JdbcTemplate](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)ã‚’ä½¿ã£ã¦ãã ã•ã„   Databaseã¸ã®æ¥ç¶šãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ç’°å¢ƒå¤‰æ•°ã§è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„   ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ç©ºList Jsonã‚’è¿”å´ã—ã¦ãã ã•ã„ã€‚HTTP Statusã¯200ã‚’è¿”å´ã—ã¦ãã ã•ã„   Databaseæ¥ç¶šç­‰ã®ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ HTTP Status 500ã§Jsonã‚’è¿”å´ã—ã¦ãã ã•ã„    6.    å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸ (ä¸€éƒ¨çœç•¥) ã“ã®é€šã‚Šã«ä½œã‚‰ãªãã¦ã‚‚OKã§ã™     ![img](file:////Users/abi01384/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image001.png)ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å±•é–‹ã•ã‚Œã¾ã™...   `â””â”€â”€ src``  â””â”€â”€ main``    â””â”€â”€ kotlin``      â””â”€â”€ com``        â””â”€â”€ example``          â””â”€â”€ app``            â”œâ”€â”€ ExampleApplication.kt``            â”œâ”€â”€ repository``            â”‚  â””â”€â”€ BookRepository.kt (JdbcTemplateå®Ÿè£…ã‚’è¨˜è¿°ã™ã‚‹)``            â””â”€â”€ web``              â”œâ”€â”€ controller``              â”‚  â””â”€â”€ BookController.kt``              â””â”€â”€ entity``                 â””â”€â”€ Book.kt` |
| 3                                                     | Clean Architecture           | gradleã‚’ãƒãƒ«ãƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã«ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã—ã¦ãã ã•ã„ (é›£ã—ã„å ´åˆã¯ãƒ˜ãƒ«ãƒ—ã—ã¾ã™)   Databaseã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨Controller Responseã¯domain objectã‚’ä½¿ã‚ãšã«ãã‚Œãã‚Œdtoã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„   æ§‹æˆ        web        (Controller / SpringBootApplicationèµ·å‹•ã‚¯ãƒ©ã‚¹)    domain        (domain object)    infra        (databaseã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³)    application        (usecase / infraã®interface)       4.    å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸ (ä¸€éƒ¨çœç•¥ / classåãªã©ã¯é©å®œå¤‰æ›´ã—ã¦ãã ã•ã„)   ![img](file:////Users/abi01384/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image001.png)ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å±•é–‹ã•ã‚Œã¾ã™...   `root``â”œâ”€â”€ application``â”‚  â”œâ”€â”€ build.gradle.kts``â”‚  â””â”€â”€ src``â”‚    â””â”€â”€ main``â”‚      â””â”€â”€ kotlin``â”‚        â””â”€â”€ com``â”‚          â””â”€â”€ example``â”‚            â””â”€â”€ app``â”‚              â””â”€â”€ application``â”‚                â”œâ”€â”€ repository``â”‚                â”‚  â””â”€â”€ BookRepository.kt (BookRepositoryImplã®Interface)``â”‚                â””â”€â”€ usecase``â”‚                  â””â”€â”€ FetchBook.kt (usecase. Controllerã§åˆ©ç”¨ã™ã‚‹)``â”œâ”€â”€ build.gradle.kts``â”œâ”€â”€ domain``â”‚  â”œâ”€â”€ build.gradle.kts``â”‚  â””â”€â”€ src.main.kotlin.com.example.app.domain.entity.Book.kt``â”‚``â”œâ”€â”€ infra``â”‚  â”œâ”€â”€ build.gradle.kts``â”‚  â””â”€â”€ src``â”‚    â””â”€â”€ main``â”‚      â””â”€â”€ kotlin``â”‚        â””â”€â”€ com``â”‚          â””â”€â”€ example``â”‚            â””â”€â”€ app``â”‚              â””â”€â”€ infra``â”‚                â”œâ”€â”€ entity``â”‚                â”‚  â””â”€â”€ Book.kt (Databaseç”¨ã®DTO)``â”‚                â””â”€â”€ repository``â”‚                  â””â”€â”€ BookRepositoryImpl.kt``â”œâ”€â”€ settings.gradle.kts``â””â”€â”€ web``  â”œâ”€â”€ build.gradle.kts``  â””â”€â”€ src``    â””â”€â”€ main``      â”œâ”€â”€ kotlin``      â”‚  â””â”€â”€ com``      â”‚    â””â”€â”€ example``      â”‚      â””â”€â”€ app``      â”‚        â”œâ”€â”€ ExampleApplication.kt``      â”‚        â””â”€â”€ web``      â”‚          â”œâ”€â”€ controller``      â”‚          â”‚  â”œâ”€â”€ BookController.kt``      â”‚          â””â”€â”€ response``      â”‚            â”œâ”€â”€ BookResponse.kt (Responseç”¨ã®DTO)``      â”‚            â””â”€â”€ ErrorResponse.kt``      â””â”€â”€ resources``        â””â”€â”€ application.yml` |
| 4                                                     | MyBatis å°å…¥                 | JdbcTemplateã®å®Ÿè£…ã‚’MyBatisã«å¤‰æ›´ã—ã¦ãã ã•ã„                |
| 5                                                     | Get å®Ÿè£…                     | isbnã‚’å¼•æ•°ã§å—ã‘å–ã£ã¦BookResponseã‚’è¿”å´ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„   isbnã¯13æ¡ã®æ•°å­—ã ã‘validã¨ã—ã¦ãã ã•ã„   dataãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ HTTP status 404ã«ã—ã¦æ¬¡ã®ã‚ˆã†ãªJSONã‚’è¿”å´ã—ã¦ãã ã•ã„ã€‚        ä¾‹: {"reason":"No Book found.       isbn=9784111111111"} |
| 6                                                     | Value Object                 | isbnã®value objectã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚æ›è¨€ã™ã‚‹ã¨ã€domain       layerã«Isbn Classã‚’ä½œã£ã¦ãã ã•ã„ã€ã¨ã„ã†æ„å‘³ã§ã™   5.       ã§ä½œæˆã—ãŸGetå‡¦ç†ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆisbn ã«ã€ãƒã‚§ãƒƒã‚¯ãƒ‡ã‚£ã‚¸ãƒƒãƒˆè¨ˆç®—ã®ãƒã‚§ãƒƒã‚¯ã‚’å°å…¥ã—ã¦ãã ã•ã„ã€‚        ãƒã‚§ãƒƒã‚¯ãƒ‡ã‚£ã‚¸ãƒƒãƒˆãŒä¸æ­£ã®å ´åˆã¯ HTTP status 400ã«ã—ã¦Jsonã‚’è¿”å´ã—ã¦ãã ã•ã„   isbnã®ãƒã‚§ãƒƒã‚¯ãƒ‡ã‚£ã‚¸ãƒƒãƒˆè¨ˆç®—ä»•æ§˜ã¯é©å½“ã«æ¤œç´¢ã—ã¦æ‹¾ã£ã¦ãã ã•ã„ã€‚[ä¾‹ãˆã°ã“ã“](https://isbn-information.com/check-digit-for-the-13-digit-isbn.html)ã¨ã‹   ãƒã‚§ãƒƒã‚¯ãƒ‡ã‚£ã‚¸ãƒƒãƒˆè¨ˆç®—ã®functionã¯JUnitã§å˜ä½“ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„ |
| 7                                                     | Databaseä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°     | List,       Getå‡¦ç†ã§DatabaseAccessExceptionãŒç™ºç”Ÿã—ãŸå ´åˆã®å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„   HTTP       status 500ã«ã—ã¦JSONã‚’è¿”å´ã—ã¦ãã ã•ã„ã€‚        ä¾‹: {"reason":"BookRepository#findã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"} |
| 8                                                     | Insert å®Ÿè£…                  | æ–°è¦ã®æ›¸ç±ã‚’ç™»éŒ²ã™ã‚‹å‡¦ç†ã‚’è‡ªç”±ã«å®Ÿè£…ã—ã¦ãã ã•ã„             |
| 9                                                     | Update å®Ÿè£…                  | æ›¸ç±æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹å‡¦ç†ã‚’è‡ªç”±ã«å®Ÿè£…ã—ã¦ãã ã•ã„               |
| 10                                                    | Request Logger å®Ÿè£…          | Requestã§å—ã‘å–ã£ãŸæƒ…å ± (Request Header, Method, URI, Body) ã‚’debug logã«å‡ºåŠ›ã—ã¦ãã ã•ã„ |
| 11                                                    | custom validator             | publisherãŒ       ã€Œã»ã’ã»ã’æ›¸æˆ¿ã€ ã®ã¨ãã€priice < 1000 ã®å•†å“ã¯ç™»éŒ²ã€æ›´æ–°ã§ããªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„              ã“ã®validateã¯Web Layerã«å®Ÿè£…ã—ã¦ãã ã•ã„ |
| 12                                                    | gzip response                | APIã®Responseã‚’gzip åœ§ç¸®ã—ã¦ãã ã•ã„                         |
| 13                                                    | API Call                     | Getæ™‚ã«Bookã®Ratingã¨Genreã‚’è¿”ã™APIã‚’Callã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«è¿½åŠ ã—ã¦ãã ã•ã„        APIã¯è‡ªä½œã—ã¦ã‚‚Mockã‚’ç”¨æ„ã—ã¦ã‚‚ã‹ã¾ã„ã¾ã›ã‚“    APIã¯ISBNã‚’å—ã‘å–ã‚Šã€Rating, Genreã‚’è¿”ã—ã¾ã™ã€‚ä¾‹: { "rating": "4.5", "genre":        "å°‘å¹´ã‚³ãƒŸãƒƒã‚¯" }    API        Callã«å¤±æ•—ã—ãŸå ´åˆã€rating, genreã‚’ã¤ã‘ãšã«å¾“æ¥ã®Getå‡¦ç†ã®Responseã‚’è¿”ã™ã‚ˆã†ã«ã—ã¦ãã ã•ã„ |
| **ãŠã¾ã‘ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸èª²é¡Œ (ã“ã‚Œã‚‰ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¾ã›ã‚“)** |                              |                                                              |
| 1                                                     | aws s3ã«csv fileã‚’uploadã™ã‚‹ | listã®çµæœã‚’csvã«ã—ã¦s3ã«uploadã—ã¦ãã ã•ã„   s3ã¯localstackã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ |
| 2                                                     | Response Loggerå®Ÿè£…          | Responseã‚’debug logã«å‡ºåŠ›ã—ã¦ãã ã•ã„                        |
| 3                                                     | èªè¨¼èªå¯                     | Insert,       Updateå‡¦ç†ã«å¯¾ã—ã¦æŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ä»¥å¤–ã¯å‡¦ç†ã‚’è¡Œãˆãªã„ã‚ˆã†ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿæ§‹ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„        å®Ÿè£…ã€å‡¦ç†æ–¹æ³•ã€åˆ©ç”¨ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã¯ã™ã¹ã¦è‡ªç”±ã§ã™        ğŸ™†â€â™‚ï¸ |
| 4                                                     | ä¸¦åˆ—å®Ÿè¡Œ                     | Getæ™‚ã®API Callã¨DBå‡¦ç†ã‚’ä¸¦åˆ—å®Ÿè¡Œã—ã¦ãã ã•ã„   ã“ã®æ™‚ç‚¹ã§ã¯DBå‡¦ç†ã¯Blocking IOã«ãªã‚Šã¾ã™ã€‚APIã¯Non-Blockingã§ã‚‚Blockingã§ã‚‚ ğŸ™†â€â™‚ï¸ |
| 5                                                     | WebFlux                      | èª²é¡Œã§ä½œã£ãŸAPIã‚’WebFluxã§å®Ÿè£…ã—ç›´ã—ã¾ã™        [BlockHound](https://github.com/reactor/BlockHound) ã‚’å…¥ã‚Œã¦ã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã‘ã‚Œã°        ğŸ™†â€â™‚ï¸    Controllerã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å½¢å¼ã§ã‚‚functionå½¢å¼ã§ã‚‚ğŸ™†â€â™‚ï¸ |



